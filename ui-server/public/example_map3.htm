
<!-- saved from url=(0042)http://econym.org.uk/gmap/example_map3.htm -->
<HTML><BODY><DIV class="webkit-line-gutter-backdrop"></DIV><TABLE><TBODY><TR><TD class="webkit-line-number"><TD class="webkit-line-content"><SPAN class="webkit-html-doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt; </SPAN></TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"><SPAN class="webkit-html-tag">&lt;html&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">  <SPAN class="webkit-html-tag">&lt;head&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    <SPAN class="webkit-html-tag">&lt;title&gt;</SPAN>Google Maps<SPAN class="webkit-html-tag">&lt;/title&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    <SPAN class="webkit-html-tag">&lt;script <SPAN class="webkit-html-attribute-name">src</SPAN>="<A class="webkit-html-attribute-value webkit-html-resource-link" target="_blank" href="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=ABQIAAAAPDUET0Qt7p2VcSk6JNU1sBSM5jMcmVqUpI7aqV44cW1cEECiThQYkcZUPRJn9vy_TWxWvuLoOfSFBw">http://maps.google.com/maps?file=api&amp;amp;v=2&amp;amp;sensor=false&amp;amp;key=ABQIAAAAPDUET0Qt7p2VcSk6JNU1sBSM5jMcmVqUpI7aqV44cW1cEECiThQYkcZUPRJn9vy_TWxWvuLoOfSFBw</A>" <SPAN class="webkit-html-attribute-name">type</SPAN>="<SPAN class="webkit-html-attribute-value">text/javascript</SPAN>"&gt;</SPAN><SPAN class="webkit-html-tag">&lt;/script&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">  <SPAN class="webkit-html-tag">&lt;/head&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">  <SPAN class="webkit-html-tag">&lt;body <SPAN class="webkit-html-attribute-name">onunload</SPAN>="<SPAN class="webkit-html-attribute-value">GUnload()</SPAN>"&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    <SPAN class="webkit-html-comment">&lt;!-- you can use tables or divs for the overall layout --&gt; </SPAN></TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    <SPAN class="webkit-html-tag">&lt;table <SPAN class="webkit-html-attribute-name">border</SPAN>=<SPAN class="webkit-html-attribute-value">1</SPAN>&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      <SPAN class="webkit-html-tag">&lt;tr&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        <SPAN class="webkit-html-tag">&lt;td&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">           <SPAN class="webkit-html-tag">&lt;div <SPAN class="webkit-html-attribute-name">id</SPAN>="<SPAN class="webkit-html-attribute-value">map</SPAN>" <SPAN class="webkit-html-attribute-name">style</SPAN>="<SPAN class="webkit-html-attribute-value">width: 550px; height: 450px</SPAN>"&gt;</SPAN><SPAN class="webkit-html-tag">&lt;/div&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        <SPAN class="webkit-html-tag">&lt;/td&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        <SPAN class="webkit-html-tag">&lt;td <SPAN class="webkit-html-attribute-name">width</SPAN> = <SPAN class="webkit-html-attribute-value">150</SPAN> <SPAN class="webkit-html-attribute-name">valign</SPAN>="<SPAN class="webkit-html-attribute-value">top</SPAN>" <SPAN class="webkit-html-attribute-name">style</SPAN>="<SPAN class="webkit-html-attribute-value">text-decoration: underline; color: #4444ff;</SPAN>"&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">           <SPAN class="webkit-html-tag">&lt;div <SPAN class="webkit-html-attribute-name">id</SPAN>="<SPAN class="webkit-html-attribute-value">side_bar</SPAN>"&gt;</SPAN><SPAN class="webkit-html-tag">&lt;/div&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        <SPAN class="webkit-html-tag">&lt;/td&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      <SPAN class="webkit-html-tag">&lt;/tr&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    <SPAN class="webkit-html-tag">&lt;/table&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    <SPAN class="webkit-html-tag">&lt;a <SPAN class="webkit-html-attribute-name">href</SPAN>="<A class="webkit-html-attribute-value webkit-html-external-link" target="_blank" href="http://econym.org.uk/gmap/basic3.htm">basic3.htm</A>"&gt;</SPAN>Back to the tutorial page<SPAN class="webkit-html-tag">&lt;/a&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    <SPAN class="webkit-html-tag">&lt;noscript&gt;</SPAN><SPAN class="webkit-html-tag">&lt;b&gt;</SPAN>JavaScript must be enabled in order for you to use Google Maps.<SPAN class="webkit-html-tag">&lt;/b&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      However, it seems JavaScript is either disabled or not supported by your browser. </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      To view Google Maps, enable JavaScript by changing your browser options, and then </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      try again.</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    <SPAN class="webkit-html-tag">&lt;/noscript&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    <SPAN class="webkit-html-tag">&lt;script <SPAN class="webkit-html-attribute-name">type</SPAN>="<SPAN class="webkit-html-attribute-value">text/javascript</SPAN>"&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    //&lt;![CDATA[</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    if (GBrowserIsCompatible()) {</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      // this variable will collect the html which will eventualkly be placed in the side_bar</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      var side_bar_html = "";</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      // arrays to hold copies of the markers used by the side_bar</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      // because the function closure trick doesnt work there</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      var gmarkers = [];</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      // A function to create the marker and set up the event window</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      function createMarker(point,name,html) {</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        var marker = new GMarker(point);</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        GEvent.addListener(marker, "click", function() {</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">          marker.openInfoWindowHtml(html);</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        });</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        // save the info we need to use later for the side_bar</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        gmarkers.push(marker);</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        // add a line to the side_bar html</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        side_bar_html += '&lt;a href="javascript:myclick(' + (gmarkers.length-1) + ')"&gt;' + name + '&lt;\/a&gt;&lt;br&gt;';</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        return marker;</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      }</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      // This function picks up the click and opens the corresponding info window</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      function myclick(i) {</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        GEvent.trigger(gmarkers[i], "click");</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      }</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      // create the map</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      var map = new GMap2(document.getElementById("map"));</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      map.addControl(new GLargeMapControl());</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      map.addControl(new GMapTypeControl());</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      map.setCenter(new GLatLng( 43.907787,-79.359741), 9);</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      // Read the data from example.xml</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      GDownloadUrl("example.xml", function(doc) {</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        var xmlDoc = GXml.parse(doc);</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        var markers = xmlDoc.documentElement.getElementsByTagName("marker");</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">          </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        for (var i = 0; i &lt; markers.length; i++) {</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">          // obtain the attribues of each marker</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">          var lat = parseFloat(markers[i].getAttribute("lat"));</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">          var lng = parseFloat(markers[i].getAttribute("lng"));</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">          var point = new GLatLng(lat,lng);</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">          var html = markers[i].getAttribute("html");</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">          var label = markers[i].getAttribute("label");</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">          // create the marker</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">          var marker = createMarker(point,label,html);</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">          map.addOverlay(marker);</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        }</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        // put the assembled side_bar_html contents into the side_bar div</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">        document.getElementById("side_bar").innerHTML = side_bar_html;</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      });</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    }</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    else {</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">      alert("Sorry, the Google Maps API is not compatible with this browser");</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    }</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    // This Javascript is based on code provided by the</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    // Community Church Javascript Team</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    // http://www.bisphamchurch.org.uk/   </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    // http://econym.org.uk/gmap/</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    //]]&gt;</TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">    <SPAN class="webkit-html-tag">&lt;/script&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content">  <SPAN class="webkit-html-tag">&lt;/body&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"><SPAN class="webkit-html-tag">&lt;/html&gt;</SPAN> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR><TR><TD class="webkit-line-number"><TD class="webkit-line-content"> </TD></TR></TBODY></TABLE></BODY></HTML>